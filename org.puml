@startuml
!theme plain
title Hệ thống Quản lý Nhân sự Đại học (University HR Management System)

skinparam backgroundColor #FFFFFF
skinparam activity {
  BackgroundColor #E3F2FD
  BorderColor #1976D2
  FontColor #000000
}
skinparam activityDiamond {
  BackgroundColor #FFF3E0
  BorderColor #F57C00
  FontColor #000000
}
skinparam note {
  BackgroundColor #F3E5F5
  BorderColor #7B1FA2
  FontColor #000000
}

package "Quản lý Cơ cấu Tổ chức" {
  start
  :Tạo yêu cầu thành lập đơn vị;
  note right: Nhập thông tin cơ bản\n(Khoa, Viện, Bộ môn, Phòng ban)
  
  :Lưu trạng thái Draft;
  
  if (Kiểm tra tính hợp lệ?) then (Có)
    :Chuyển sang Review;
    :Thẩm định nguồn lực;
    note right: Kiểm tra ngân sách,\nnhân sự, cơ sở vật chất
    
    if (Đủ điều kiện?) then (Có)
      :Chuyển sang Approve;
      :Phê duyệt thành lập;
      note right: Quyết định chính thức\nthành lập đơn vị
      
      :Chuyển sang Active;
      :Kích hoạt đơn vị;
      :Bổ nhiệm nhân sự;
      note right: Thiết lập vai trò,\nphân công công việc
      
      :Theo dõi & Biến đổi;
      note right: Quản lý trạng thái\nvà lịch sử thay đổi
      
    else (Không)
      :Từ chối yêu cầu;
      :Thông báo lý do;
    endif
    
  else (Không)
    :Yêu cầu bổ sung thông tin;
    :Quay lại Draft;
  endif
  
  stop
}

package "Quản lý Nhân sự" {
  start
  
  :Tạo hồ sơ nhân viên;
  note right: Thông tin cá nhân,\nliên hệ, học vấn
  
  :Tạo Employee record;
  
  :Phân công công việc;
  note right: Gán vào đơn vị,\nvị trí, tỷ lệ phân công
  
  :Tạo Employment contract;
  note right: Hợp đồng lao động,\nloại hình, thời hạn
  
  :Quản lý học vị;
  note right: Bằng cấp, chứng chỉ,\nđào tạo
  
  :Đánh giá hiệu suất;
  note right: Kỳ đánh giá,\nđiểm số, nhận xét
  
  :Quản lý nghỉ phép;
  note right: Đơn xin nghỉ,\nphê duyệt, theo dõi
  
  stop
}

package "Quy trình Duyệt Đơn xin Nghỉ" {
  start
  
  :Nhân viên tạo đơn xin nghỉ;
  note right: Loại nghỉ, thời gian,\nlý do
  
  :Lưu trạng thái PENDING;
  
  :Gửi đến người phê duyệt;
  note right: Theo cấp bậc tổ chức\nhoặc vai trò
  
  if (Kiểm tra quyền duyệt?) then (Có)
    if (Quyết định?) then (Duyệt)
      :Cập nhật trạng thái APPROVED;
      :Ghi log hoạt động;
      :Thông báo kết quả;
      
    else (Từ chối)
      :Cập nhật trạng thái REJECTED;
      :Ghi log hoạt động;
      :Thông báo lý do từ chối;
    endif
    
  else (Không)
    :Thông báo không có quyền;
  endif
  
  stop
}

package "Quy trình Đánh giá Hiệu suất" {
  start
  
  :Tạo kỳ đánh giá;
  note right: Thiết lập thời gian,\nchuẩn đánh giá
  
  :Phân công người đánh giá;
  note right: Theo cấp bậc,\nvai trò trong tổ chức
  
  :Nhân viên tự đánh giá;
  note right: Điền form đánh giá,\nmục tiêu cá nhân
  
  :Người quản lý đánh giá;
  note right: Đánh giá hiệu suất,\nđưa ra nhận xét
  
  :Tổng hợp kết quả;
  note right: Tính điểm trung bình,\nxếp loại
  
  :Lưu trữ kết quả;
  note right: Lưu vào hệ thống,\ntạo báo cáo
  
  stop
}

package "Quản lý Phân công Công việc" {
  start
  
  :Tạo Assignment;
  note right: Nhân viên, đơn vị,\nvị trí, tỷ lệ phân công
  
  :Thiết lập thời gian hiệu lực;
  note right: Ngày bắt đầu,\nngày kết thúc
  
  :Kiểm tra xung đột;
  note right: Tổng tỷ lệ phân công\nkhông vượt quá 100%
  
  if (Hợp lệ?) then (Có)
    :Lưu Assignment;
    :Cập nhật trạng thái nhân viên;
    
  else (Không)
    :Thông báo lỗi;
    :Yêu cầu điều chỉnh;
  endif
  
  stop
}

package "Hệ thống Phân quyền" {
  start
  
  :Đăng nhập hệ thống;
  
  :Kiểm tra quyền truy cập;
  note right: Dựa trên vai trò,\nđơn vị, cấp bậc
  
  if (Có quyền?) then (Có)
    :Cho phép truy cập;
    :Hiển thị menu tương ứng;
    
    if (Thao tác cần quyền?) then (Có)
      :Kiểm tra quyền thao tác;
      
      if (Có quyền thao tác?) then (Có)
        :Thực hiện thao tác;
        
      else (Không)
        :Từ chối thao tác;
        :Thông báo không có quyền;
      endif
      
    else (Không)
      :Thực hiện thao tác thường;
    endif
    
  else (Không)
    :Từ chối đăng nhập;
    :Chuyển về trang đăng nhập;
  endif
  
  stop
}

package "Báo cáo và Thống kê" {
  start
  
  :Chọn loại báo cáo;
  note right: Nhân sự, tổ chức,\nhiệu suất, nghỉ phép
  
  :Thiết lập điều kiện lọc;
  note right: Thời gian, đơn vị,\nloại nhân viên
  
  :Truy vấn dữ liệu;
  
  :Xử lý và tính toán;
  note right: Tổng hợp, thống kê,\ntính toán chỉ số
  
  :Tạo báo cáo;
  note right: Định dạng PDF/Excel,\nbiểu đồ, bảng số liệu
  
  :Xuất báo cáo;
  
  stop
}

@enduml
